#!/usr/bin/env bash

COMMIT_MSG_FILE="$1"
COMMIT_MSG=$(cat "$COMMIT_MSG_FILE")

PATTERN='^(feat|fix|chore|docs|refactor|test|perf)(\(.+\))?: .+'

if [[ ! "$COMMIT_MSG" =~ $PATTERN ]]; then
  echo ""
  echo "‚ùå Invalid commit message format."
  echo ""
  echo "Expected format:"
  echo "  type(scope): description"
  echo ""
  echo "Examples:"
  echo "  feat(core): add install command"
  echo "  fix(cli): correct parsing bug"
  echo "  chore: update dependencies"
  echo ""
  exit 1
fi
